main :=
  compile_toplevel (toplevel (start (read_file (nth 0 process_arguments)) builtins)).env;

compile_toplevel := env -> for env (name syntax -> do
  (print "let ") (print name) (print " = ")
  (compile syntax))
  (print ";\n")
  (print "module.exports.") (print name) (print " = ") (print name)
  (print ";\n\n");

compile syntax := switch (syntax)
  numer n: do (print n) (print "n");;